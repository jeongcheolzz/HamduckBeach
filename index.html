<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í•¨ë•í•´ìˆ˜ìš•ì¥ ê°€ì´ë“œ</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');

      html,
      body {
        margin: 0;
        padding: 0;
        font-family: 'Gowun Dodum', sans-serif;
        background: transparent;
        color: #000;
        overflow: auto;
        -webkit-font-smoothing: antialiased;
      }

      .background {
        position: fixed;
        inset: 0;
        width: 100vw;
        height: 100vh;
        background: url('íŒŒë„.gif') center/cover no-repeat fixed;
        z-index: -1;
      }

      .page {
        max-width: 980px;
        margin: 0 auto;
        padding: 4vh 4vw;
        box-sizing: border-box;
        background: transparent;
        position: relative;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 18px;
      }

      h1 {
        margin: 0;
        font-size: 1.8rem;
        color: #000;
      }

      .sound-controls {
        display: flex;
        flex-direction: column;
        align-items: flex-end; /* âœ… ë²„íŠ¼ë“¤ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë¶™ì„ */
        gap: 10px;
      }

      .sound-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(4px);
        cursor: pointer;
        font-size: 0.95rem;
        color: #000;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        user-select: none;
        width: fit-content; /* âœ… ê¸€ìì— ë§ì¶° ë°•ìŠ¤ í­ ìë™ ì¡°ì • */
        max-width: 90%; /* âœ… ëª¨ë°”ì¼ì—ì„œë„ ë„˜ì¹˜ì§€ ì•Šê²Œ */
      }

      .sound-btn img {
        width: 18px; /* ê¸°ì¡´ 22px â†’ ê¸€ì”¨ í¬ê¸° ë¹„ìœ¨ë¡œ ë§ì¶¤ */
        height: 18px;
      }

      .container {
        padding: 18px;
        background: transparent;
      }

      .section {
        margin-top: 20px;
      }

      .section h2 {
        margin: 6px 0 12px 0;
        font-size: 1.15rem;
        color: #000;
      }

      .note {
        color: #333;
        margin: 0 0 12px 0;
      }

      .img-card {
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 12px;
        background: rgba(255, 255, 255, 0);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.04);
      }

      .img-card img {
        display: block;
        width: 100%;
        height: auto;
        object-fit: cover;
      }

      .img-card figcaption {
        padding: 8px 12px;
        font-size: 0.92rem;
        color: #111;
      }

      .cafe-map {
        margin-bottom: 14px;
      }

      .cafe {
        margin-bottom: 18px;
      }

      .cafe-title {
        margin: 6px 0 8px 0;
        font-size: 1rem;
        font-weight: 800;
        color: #000;
      }

      .cafe-row {
        display: flex;
        gap: 10px;
      }

      .cafe-row .img-card {
        flex: 1 1 calc(50% - 5px);
      }

      .game-btn {
        margin-top: 14px;
        display: inline-block;
        background: linear-gradient(180deg, #00baff, #008fd9);
        color: white;
        padding: 10px 16px;
        border-radius: 12px;
        font-weight: 800;
        text-decoration: none;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      }

      .footer {
        margin-top: 18px;
        color: #222;
        font-size: 0.95rem;
        line-height: 1.5;
      }

      .highlight {
        color: #d33;
        font-weight: 800;
      }

      @media (max-width: 640px) {
        .page {
          padding: 3vh 4vw;
        }
        h1 {
          font-size: 1.4rem;
        }
        .cafe-row {
          flex-direction: column;
        }
        .sound-btn {
          font-size: 0.9rem;
          padding: 8px;
        }
      }
    </style>
  </head>

  <body>
    <div class="background" aria-hidden="true"></div>

    <div class="page">
      <header>
        <h1>í•¨ë•í•´ìˆ˜ìš•ì¥ ê°€ì´ë“œ</h1>

        <div class="sound-controls">
          <div
            id="waveToggle"
            class="sound-btn"
            role="button"
            aria-pressed="true"
            tabindex="0"
          >
            <img
              id="waveIcon"
              src="https://img.icons8.com/ios-filled/50/000000/speaker.png"
              alt="íŒŒë„ì†Œë¦¬ ì•„ì´ì½˜"
            />
            <span>íŒŒë„ì†Œë¦¬</span>
          </div>
          <div
            id="musicToggle"
            class="sound-btn"
            role="button"
            aria-pressed="true"
            tabindex="0"
          >
            <img
              id="musicIcon"
              src="https://img.icons8.com/ios-filled/50/000000/speaker.png"
              alt="ìŒì•…ì†Œë¦¬ ì•„ì´ì½˜"
            />
            <span>ìŒì•…ì†Œë¦¬</span>
          </div>
          <!-- ì¶”ê°€í•œ ì•ˆë‚´ë¬¸ (ìš”ì²­ëœ í…ìŠ¤íŠ¸) -->
          <p
            class="sound-note"
            style="margin: 0; font-size: 0.9rem; color: #333"
          >
            ğŸµ ìŒì•…ì†Œë¦¬ê°€ ì•ˆ ë‚˜ì˜¤ë©´ ë²„íŠ¼ ëˆŒëŸ¬ì„œ ê»ë‹¤ê°€ ì¼œì£¼ì„¸ìš”!
          </p>
        </div>
      </header>

      <!-- ìš”ì²­ëŒ€ë¡œ: ê²Œì„ ë²„íŠ¼ ì„¹ì…˜ì„ ìµœìƒë‹¨(ì œëª©ê³¼ ì†Œë¦¬ ë²„íŠ¼ ë°”ë¡œ ë°‘)ìœ¼ë¡œ ì´ë™ -->
      <section class="section" style="margin-top: 0">
        <a class="game-btn" href="game.html">ğŸ® ê°ˆë§¤ê¸° í”¼í•˜ê¸° ê²Œì„í•˜ëŸ¬ ê°€ê¸°</a>
        <p class="footer">
          ì‚¬ë°©ì—ì„œ ë‚ ì•„ì˜¤ëŠ” ê°ˆë§¤ê¸°ë¥¼ í”¼í•˜ê³  ìƒì¡´ ì‹œê°„ì„ ì¸¡ì •í•˜ì—¬ ë¦¬ë”ë³´ë“œì—
          ê¸°ë¡í•˜ëŠ” í˜•ì‹.
          <span class="highlight">ìƒìœ„ 3ëª…ì—ê²Œ ìƒí’ˆ ìˆìŒ!!</span>
        </p>
      </section>

      <main class="container">
        <section id="hamdeok" class="section">
          <h2>í•¨ë•í•´ìˆ˜ìš•ì¥</h2>
          <p class="note">
            í•¨ë•í•´ìˆ˜ìš•ì¥ì€ ê³ ìš´ ëª¨ë˜ì™€ í‘¸ë¥¸ ë°”ë‹¤ê°€ ì–´ìš°ëŸ¬ì§„ ì œì£¼ì˜ ëŒ€í‘œ
            í•´ë³€ì…ë‹ˆë‹¤. ìˆ˜ì‹¬ì´ ì–•ê³  íŒŒë„ê°€ ì”ì”í•´ ê°€ì¡± ë‹¨ìœ„ë¡œ ì°¾ê¸° ì¢‹ìœ¼ë©°,
            í˜„ë¬´ì•”ê³¼ ì•„ì¹˜í˜• ë‹¤ë¦¬ê°€ ì–´ìš°ëŸ¬ì ¸ ì œì£¼ì˜ í’ê²½ì„ í•œëˆˆì— ê°ìƒí•  ìˆ˜
            ìˆìŠµë‹ˆë‹¤.
          </p>

          <figure class="img-card">
            <img src="í•¨ë•í•´ìˆ˜ìš•ì¥%20ìœ„ì¹˜ì‚¬ì§„.png" alt="í•¨ë•í•´ìˆ˜ìš•ì¥ ìœ„ì¹˜" />
            <figcaption>í•¨ë•í•´ìˆ˜ìš•ì¥ ìœ„ì¹˜</figcaption>
          </figure>

          <figure class="img-card">
            <img src="í•¨ë•í•´ìˆ˜ìš•ì¥%20í’ê²½ì‚¬ì§„.png" alt="í•¨ë•í•´ìˆ˜ìš•ì¥ í’ê²½" />
            <figcaption>í•´ë³€ í’ê²½</figcaption>
          </figure>
        </section>

        <section id="nearby-cafes" class="section">
          <h2>ê·¼ì²˜ ì¹´í˜</h2>
          <p class="note">ì¹´í˜ ìœ„ì¹˜ì™€ ê° ë§¤ì¥ì˜ ì‚¬ì§„ ë° ë©”ë‰´íŒì…ë‹ˆë‹¤.</p>

          <figure class="img-card cafe-map">
            <img src="ì¹´í˜%20ìœ„ì¹˜ì‚¬ì§„.png" alt="ê·¼ì²˜ ì¹´í˜ ìœ„ì¹˜ ì‚¬ì§„" />
            <figcaption>ì¹´í˜ ìœ„ì¹˜ (ê·¼ê±°ë¦¬)</figcaption>
          </figure>

          <article class="cafe">
            <h3 class="cafe-title">ë¸ë¬¸ë„</h3>
            <div class="cafe-row">
              <figure class="img-card">
                <img src="ì¹´í˜%20ë¸ë¬¸ë„.png" alt="ë¸ë¬¸ë„ ê°€ê²Œ ì‚¬ì§„" />
                <figcaption>ë¸ë¬¸ë„ â€” ê°€ê²Œ ì „ê²½</figcaption>
              </figure>
              <figure class="img-card">
                <img src="ì¹´í˜%20ë¸ë¬¸ë„%20ë©”ë‰´íŒ.png" alt="ë¸ë¬¸ë„ ë©”ë‰´íŒ" />
                <figcaption>ë¸ë¬¸ë„ â€” ë©”ë‰´íŒ</figcaption>
              </figure>
            </div>
          </article>

          <article class="cafe">
            <h3 class="cafe-title">ìŠ¤íƒ€ë²…ìŠ¤</h3>
            <div class="cafe-row">
              <figure class="img-card">
                <img src="ì¹´í˜%20ìŠ¤íƒ€ë²…ìŠ¤.png" alt="ìŠ¤íƒ€ë²…ìŠ¤ ê°€ê²Œ ì‚¬ì§„" />
                <figcaption>ìŠ¤íƒ€ë²…ìŠ¤ â€” ê°€ê²Œ ì „ê²½</figcaption>
              </figure>
              <figure class="img-card">
                <img src="ì¹´í˜%20ìŠ¤íƒ€ë²…ìŠ¤%20ë©”ë‰´íŒ.png" alt="ìŠ¤íƒ€ë²…ìŠ¤ ë©”ë‰´íŒ" />
                <figcaption>ìŠ¤íƒ€ë²…ìŠ¤ â€” ë©”ë‰´íŒ</figcaption>
              </figure>
            </div>
          </article>

          <article class="cafe">
            <h3 class="cafe-title">ë©”ê°€ì»¤í”¼</h3>
            <div class="cafe-row">
              <figure class="img-card">
                <img src="ì¹´í˜%20ë©”ê°€ì»¤í”¼.png" alt="ë©”ê°€ì»¤í”¼ ê°€ê²Œ ì‚¬ì§„" />
                <figcaption>ë©”ê°€ì»¤í”¼ â€” ê°€ê²Œ ì „ê²½</figcaption>
              </figure>
              <figure class="img-card">
                <img src="ì¹´í˜%20ë©”ê°€ì»¤í”¼%20ë©”ë‰´íŒ.png" alt="ë©”ê°€ì»¤í”¼ ë©”ë‰´íŒ" />
                <figcaption>ë©”ê°€ì»¤í”¼ â€” ë©”ë‰´íŒ</figcaption>
              </figure>
            </div>
          </article>
        </section>

        <!-- ê²Œì„ ì„¹ì…˜ì€ ì´ë¯¸ ìµœìƒë‹¨ìœ¼ë¡œ ì´ë™í–ˆìœ¼ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì œê±°í•¨ -->
      </main>
    </div>

    <!-- ìœ íŠœë¸Œ í”Œë ˆì´ì–´ (0x0 í¬ê¸° ìœ ì§€) -->
    <iframe
      id="wavePlayer"
      width="0"
      height="0"
      src="https://www.youtube.com/embed/n4Mdh3TEq_k?enablejsapi=1&loop=1&playlist=n4Mdh3TEq_k"
      frameborder="0"
      allow="autoplay; encrypted-media"
    ></iframe>

    <iframe
      id="musicPlayer"
      width="0"
      height="0"
      src="https://www.youtube.com/embed/MWRb7zOxxdg?enablejsapi=1&loop=1&playlist=MWRb7zOxxdg"
      frameborder="0"
      allow="autoplay; encrypted-media"
    ></iframe>

    <script>
      // ëª¨ë“  DOMì´ ì¤€ë¹„ëœ ë’¤ ì´ˆê¸°í™”
      document.addEventListener('DOMContentLoaded', () => {
        // UI ìš”ì†Œ
        const waveToggle = document.getElementById('waveToggle');
        const musicToggle = document.getElementById('musicToggle');
        const waveIcon = document.getElementById('waveIcon');
        const musicIcon = document.getElementById('musicIcon');

        // ìƒíƒœ
        let wavePlaying = true;
        let musicPlaying = true;
        let waveYT = null;
        let musicYT = null;
        let ytReadyCount = 0;
        let ytReady = false;

        // ì•„ì´ì½˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (UIì— ì¦‰ì‹œ ë°˜ì˜)
        function updateWaveIcon() {
          waveIcon.src = wavePlaying
            ? 'https://img.icons8.com/ios-filled/50/000000/speaker.png'
            : 'https://img.icons8.com/ios-filled/50/000000/mute.png';
          waveToggle.setAttribute('aria-pressed', String(wavePlaying));
        }
        function updateMusicIcon() {
          musicIcon.src = musicPlaying
            ? 'https://img.icons8.com/ios-filled/50/000000/speaker.png'
            : 'https://img.icons8.com/ios-filled/50/000000/mute.png';
          musicToggle.setAttribute('aria-pressed', String(musicPlaying));
        }

        // ì´ˆê¸° ì•„ì´ì½˜ ë°˜ì˜
        updateWaveIcon();
        updateMusicIcon();

        // --- YouTube IFrame API ë¡œë“œ ---
        (function loadYT() {
          if (!window.YT) {
            const s = document.createElement('script');
            s.src = 'https://www.youtube.com/iframe_api';
            document.head.appendChild(s);
          } else {
            // ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì¦‰ì‹œ ì½œ
            if (typeof onYouTubeIframeAPIReady === 'function')
              onYouTubeIframeAPIReady();
          }
        })();

        // ì „ì—­ ì½œë°± ì •ì˜ (YouTube API ê·œì•½)
        window.onYouTubeIframeAPIReady = function () {
          // í”Œë ˆì´ì–´ ìƒì„±: playerVarsë¡œ ìë™/ë£¨í”„ ë“± ì„¤ì •
          try {
            waveYT = new YT.Player('wavePlayer', {
              events: { onReady: onPlayerReady },
              playerVars: {
                autoplay: 1,
                loop: 1,
                playlist: 'n4Mdh3TEq_k',
                controls: 0,
                disablekb: 1,
                modestbranding: 1,
                rel: 0,
              },
            });

            musicYT = new YT.Player('musicPlayer', {
              events: { onReady: onPlayerReady },
              playerVars: {
                autoplay: 1,
                loop: 1,
                playlist: 'MWRb7zOxxdg',
                controls: 0,
                disablekb: 1,
                modestbranding: 1,
                rel: 0,
              },
            });
          } catch (e) {
            console.warn('YT player ìƒì„± ì‹¤íŒ¨', e);
          }
        };

        function onPlayerReady() {
          ytReadyCount++;
          // í”Œë ˆì´ì–´ ì¤€ë¹„ ì‹œ ê¸°ë³¸ ë™ì‘: ë¨¼ì € mute ìƒíƒœë¡œ play ì‹œë„ (ìë™ì¬ìƒ ì •ì±… ìš°íšŒ)
          if (ytReadyCount >= 2) {
            ytReady = true;
            // ê°€ëŠ¥í•œ í•œ ë¨¼ì € ìŒì†Œê±°ë¡œ ì¬ìƒ ì‹œë„
            try {
              if (waveYT && waveYT.mute) {
                waveYT.mute();
                waveYT.playVideo?.();
              }
              if (musicYT && musicYT.mute) {
                musicYT.mute();
                musicYT.playVideo?.();
              }
            } catch (e) {
              // ì‹¤íŒ¨í•´ë„ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì‹œ ì¬ì‹œë„í•˜ë„ë¡ ì¤€ë¹„
              console.log('ìë™ì¬ìƒ ì´ˆê¸° ì‹œë„ ì‹¤íŒ¨ (í—ˆìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)');
            }
            // ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì–¸ë®¤íŠ¸/ë³¼ë¥¨ ë³µì› ì‹œë„
            enablePlaybackUnlock();
          }
        }

        // ìë™ì¬ìƒ ì •ì±… ìš°íšŒ: ì²« ìƒí˜¸ì‘ìš©(í´ë¦­/í„°ì¹˜/ìŠ¤í¬ë¡¤) ì‹œ ìŒì†Œê±°ë¡œ ì¬ìƒí•œ ë’¤ ì–¸ë®¤íŠ¸ ì‹œë„
        function enablePlaybackUnlock() {
          const unlockEvents = ['touchstart', 'click', 'scroll', 'keydown'];
          const unlock = async () => {
            try {
              if (waveYT) {
                // play -> mute -> unmute(ìƒíƒœê°€ ì¼œì ¸ìˆë‹¤ë©´)
                await safePlayMutedThenMaybeUnmute(waveYT, wavePlaying);
              }
              if (musicYT) {
                await safePlayMutedThenMaybeUnmute(musicYT, musicPlaying);
              }
            } catch (e) {
              console.log('unlock ì‹œë„ ì‹¤íŒ¨', e);
            }
            unlockEvents.forEach((ev) =>
              window.removeEventListener(ev, unlock)
            );
          };
          unlockEvents.forEach((ev) =>
            window.addEventListener(ev, unlock, { once: true, passive: true })
          );
        }

        // í”Œë ˆì´ì–´ë¥¼ ìŒì†Œê±°ë¡œ ì¬ìƒí•˜ê³  í•„ìš”í•˜ë©´ ì–¸ë®¤íŠ¸
        async function safePlayMutedThenMaybeUnmute(player, shouldBePlaying) {
          try {
            if (player && player.mute) player.mute();
            // play ì‹œë„, ì´ê±´ ë¸Œë¼ìš°ì €ì—ì„œ ê±°ë¶€ë  ìˆ˜ ìˆìŒ -> catch
            if (player && player.playVideo) player.playVideo();
            // ì ì‹œ ê¸°ë‹¤ë ¸ë‹¤ê°€ (ë¸Œë¼ìš°ì € í—ˆìš© ì‹œ) ì–¸ë®¤íŠ¸
            setTimeout(() => {
              try {
                if (player && player.unMute && shouldBePlaying) player.unMute();
              } catch (e) {}
            }, 600);
          } catch (e) {
            // play ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ
          }
        }

        // ì•ˆì „í•œ ì¬ìƒ/ì¼ì‹œì •ì§€ í˜¸ì¶œ (ì¡´ì¬ ì²´í¬ í¬í•¨)
        function safePlay(player) {
          try {
            if (!player) return;
            if (player.playVideo) player.playVideo();
          } catch (e) {}
        }
        function safePause(player) {
          try {
            if (!player) return;
            if (player.pauseVideo) player.pauseVideo();
          } catch (e) {}
        }
        function safeMute(player) {
          try {
            if (!player) return;
            if (player.mute) player.mute();
          } catch (e) {}
        }
        function safeUnmute(player) {
          try {
            if (!player) return;
            if (player.unMute) player.unMute();
          } catch (e) {}
        }

        // ë²„íŠ¼ ì´ë²¤íŠ¸ (UIëŠ” ì¦‰ì‹œ ë°˜ì‘, í”Œë ˆì´ì–´ ì œì–´ëŠ” ì¤€ë¹„ ìƒíƒœì—ì„œ ìˆ˜í–‰)
        waveToggle.addEventListener('click', () => {
          wavePlaying = !wavePlaying;
          updateWaveIcon();
          if (!ytReady || !waveYT) {
            // í”Œë ˆì´ì–´ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìœ¼ë©´ UIë§Œ ë°”ê¾¸ê³  ìœ ì €ê°€ ìƒí˜¸ì‘ìš©í–ˆìœ¼ë‹ˆ unlock ì¬ì‹œë„
            enablePlaybackUnlock();
            return;
          }
          if (wavePlaying) {
            safeUnmute(waveYT);
            safePlay(waveYT);
          } else {
            // ëŒ ë•ŒëŠ” ì¼ì‹œì •ì§€ (ë˜ëŠ” muteë§Œ í•˜ê³  ê³„ì† ì¬ìƒí•  ìˆ˜ë„ ìˆìŒ)
            safePause(waveYT);
            safeMute(waveYT);
          }
        });

        musicToggle.addEventListener('click', () => {
          musicPlaying = !musicPlaying;
          updateMusicIcon();
          if (!ytReady || !musicYT) {
            enablePlaybackUnlock();
            return;
          }
          if (musicPlaying) {
            safeUnmute(musicYT);
            safePlay(musicYT);
          } else {
            safePause(musicYT);
            safeMute(musicYT);
          }
        });

        // í‚¤ë³´ë“œ ì ‘ê·¼ì„±: ì—”í„°/ìŠ¤í˜ì´ìŠ¤ë¡œë„ í† ê¸€
        [waveToggle, musicToggle].forEach((el) => {
          el.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') el.click();
          });
        });

        // íƒ­ ì „í™˜ í›„ ë³µê·€ ì‹œ ì¬ìƒ ë³µì› (ì¤€ë¹„ëœ ê²½ìš°)
        document.addEventListener('visibilitychange', () => {
          if (!document.hidden && ytReady) {
            setTimeout(() => {
              if (wavePlaying && waveYT) safePlay(waveYT);
              if (musicPlaying && musicYT) safePlay(musicYT);
            }, 300);
          }
        });
      });
    </script>
  </body>
</html>
